:root {
  --hex-size: 40px;
  --board-bg: #f0f0f0;
  --hex-bg: #ffffff;
  --player-color: #3498db;
  --highlight-color: rgba(52, 152, 219, 0.3);
  --font-family: 'Inter', 'Noto Sans JP', sans-serif;
}

body {
  font-family: var(--font-family);
  margin: 0;
  padding: 20px;
  box-sizing: border-box;
  background-color: #e9ebee;
  color: #333;
}

.game-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  padding: 20px;
  background-color: white;
  border-radius: 16px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
  /* 幅は中身に合わせ、中央に配置 */
  width: fit-content;
  margin: 0 auto;
  /* 画面幅を超えた場合の最小幅を保証 */
  min-width: 320px;
}

h1 {
  text-align: center;
}

.game-info {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  font-size: 1.2em;
  font-weight: bold;
  text-align: center;
}

.info-box {
  background-color: #f8f9fa;
  padding: 10px 20px;
  border-radius: 12px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
}

#game-board {
  position: relative; /* オーバーレイの基準点として重要 */
  background-color: var(--board-bg);
  border-radius: 12px;
  overflow: hidden;
  margin-top: 5px;
  margin-bottom: 5px;
}

/* --- これより下のスタイルは、基本的に以前の正常な状態のものを維持 --- */

.hex {
  position: absolute;
  width: calc(var(--hex-size) * 2);
  height: calc(var(--hex-size) * 2 * 0.866);
  background-color: var(--hex-bg);
  clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
  transition: background-color 0.3s ease, transform 0.2s ease;
  cursor: pointer;
  z-index: 1;
}
.hex:hover { transform: scale(1.05); z-index: 2; }
.hex.placeable-trap-highlight { background-color: rgba(46, 204, 113, 0.4); }
.trap-piece { background-color: #95a5a6; box-shadow: 0 0 8px #7f8c8d; font-size: calc(var(--hex-size) * 0.5); color: #2c3e50; pointer-events: none; }
.hex.highlight { background-color: var(--highlight-color); }
.hex.detection-highlight { background-color: rgba(255, 165, 0, 0.3); }
.item-piece { background-color: #2ecc71; box-shadow: 0 0 8px #2ecc71; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; font-size: calc(var(--hex-size) * 0.5); pointer-events: none; }
.piece { position: absolute; top: 0; left: 0; border-radius: 50%; opacity: 0; transform: scale(0); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease-out; z-index: 5; display: flex; align-items: center; justify-content: center; }
.piece.is-visible { opacity: 1; }
.player { background-color: var(--player-color); box-shadow: 0 0 10px var(--player-color); pointer-events: none; }
.mob { pointer-events: none; z-index: 6; }
.mob-level { color: white; font-size: calc(var(--hex-size) * 0.4); font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
.message-area { width: 100%; max-width: 600px; box-sizing: border-box; height: auto; line-height: 1.2; font-size: 1em; color: #555; font-weight: 500; text-align: center; padding: 8px; border: 1px solid #ddd; border-radius: 5px; background-color: #ecf0f1; }
button { background-color: var(--player-color); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 1em; cursor: pointer; transition: background-color 0.2s, transform 0.2s; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }
button:hover { background-color: #2980b9; transform: translateY(-2px); }
button:disabled { background-color: #bdc3c7; color: #7f8c8d; cursor: not-allowed; box-shadow: none; transform: none; }
.inventory-area { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 5px; padding: 10px; background-color: #f0f0f0; border-radius: 8px; width: 100%; max-width: 600px; box-sizing: border-box; }
.inventory-item { font-weight: 500; }
.item-icon { display: inline-flex; align-items: center; justify-content: center; width: calc(var(--hex-size) * 0.6); height: calc(var(--hex-size) * 0.6); background-color: #2ecc71; color: white; font-weight: bold; border-radius: 50%; font-size: calc(var(--hex-size) * 0.4); margin-right: 5px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
.game-controls { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 20px; margin-top: 10px; }
.toggle-switch { display: flex; align-items: center; gap: 8px; cursor: pointer; }
.toggle-input { display: none; }
.toggle-label { display: block; width: 48px; height: 24px; background-color: #bdc3c7; border-radius: 12px; position: relative; transition: background-color 0.2s ease-in-out; }
.toggle-label::after { content: ''; position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background-color: white; border-radius: 50%; transition: transform 0.2s ease-in-out; }
.toggle-input:checked + .toggle-label { background-color: #e74c3c; }
.toggle-input:checked + .toggle-label::after { transform: translateX(24px); }

/* ゲーム盤に直接追加されるオーバーレイのコンテナ */
#board-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 15px 25px;
  box-sizing: border-box;
  pointer-events: none; /* クリックを透過させる */
  z-index: 10;
}

/* オーバーレイ内の各情報ボックス */
.board-info {
  position: absolute;
  background-color: rgba(0, 0, 0, 0.4);
  color: white;
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 1.1em;
  font-weight: bold;
  text-shadow: 1px 1px 2px black;
  user-select: none;
}

/* スコアを左上に配置 */
.board-info-score {
  top: 15px;
  left: 25px;
}

/* ターンを右上に配置 */
.board-info-turn {
  top: 15px;
  right: 25px;
}

/* ★★★ 古いUIを非表示にするためのクラス ★★★ */
.is-hidden {
  display: none !important;
}